<!--<nav class="main-header navbar navbar-expand navbar-white navbar-light font-style">
    <ul class="navbar-nav">
        <li class="nav-item">
            <a [routerLink]="['/']" class="nav-link">Home</a>
        </li>
        <li class="nav-item">
            <a [routerLink]="['/blank']" class="nav-link">Contact</a>
        </li>
    </ul>
    <ul class="navbar-nav ml-auto">
    </ul>
</nav>-->

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="logo">
        <img src="../../../assets/img/Logo-Portal4.png" class="imgClass" >
    </div>
    <h1 class="imgTextClass">Portal Clínicas</h1>
    <ul class="navbar-nav ml-auto">
            <input class="form-control findByName" type="text" 
                placeholder="Buscar por nombre" aria-label="Search" [(ngModel)]="term"/>
            <div class="input-group-append">
                <button class="btn btn-navbar" type="submit">
                    <i class="fas fa-search"></i>
                </button>
            </div>
    </ul>
</nav>

<!--<app-nav-bar></app-nav-bar>-->
<br />
<div class="panel panel-default toScrollUp">
    <div class="panel-body">        
        <div class="row">
            <div class="col-3 buscar-block">
                <div class="card card-colors">
                    <div class="card-header headerColor">
                        <h4 class="card-title cus-content headerColor">Parámetros de búsqueda</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col cus-content">
                                <label>Provincia:</label>
                                <ng-select [items]="provincias" bindLabel="nombre"
                                    placeholder="Seleccione una provincia" [searchable]="true" bindValue="id"
                                    [(ngModel)]="selectedProv" (change)="getCiudad()" required>
                                </ng-select>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col cus-content">
                                <label for="ciudadCli">Ciudad:</label>
                                <ng-select [items]="ciudades" bindLabel="nombre" placeholder="Seleccione una ciudad"
                                    [searchable]="true" bindValue="id" [(ngModel)]="selectedCiu" required>
                                </ng-select>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col cus-content">
                                <label for="ciudadCli">Especialidad:</label>
                                <ng-select [items]="especialidades" bindLabel="especialidad1"
                                    placeholder="Seleccione una especialidad" [searchable]="true" bindValue="id"
                                    [(ngModel)]="selectedEsp" required>
                                </ng-select>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-4">
                                <button (click)="filtrarClinicas()" type="submit" class="btn btn-class" [disabled]="loading">
                                    <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                                    Buscar
                                </button>
                            </div>
                            <div class="col-8 pull-right">
                                <button (click)="limpiarClinicas()" type="submit" class="btn btn-danger-cust" [disabled]="loading">
                                    <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                                    Limpiar
                                </button>
                            </div>
                            <!-- /.col -->
                        </div>
                    </div>
                    <!-- /.card-body -->
                </div>
            </div>
            <div class="col-7 buscar-block">                
                <perfect-scrollbar style="max-width: 100%; max-height: 380px;" class="scroll-container"
                    [config]="config" [scrollIndicators]="true">
                    <div class="row">
                        <div class="col-5" *ngFor="let cli of clinicas | searchPortal:term; let i = index">
                            <div class="card cardDimentions card-colors">
                                <div class="card-header pointerCursor headerColor">
                                    <h4 class="card-title cus-content headerColor">
                                        {{ cli.nombre | slice:0:30 }}{{ cli.nombre.length > 30 ? ' ...' : '' }}
                                    </h4>
                                </div>
                                <div class="card-body">
                                    <div class="cardBody">
                                        <a (click)="selectClinica(cli)" class="card-block clearfix">
                                            <div class="row vertical-align">
                                                <div class="col-6">
                                                    <img src="../../../assets/img/hospital.png" class="imgClass"
                                                        (click)="selectClinica(cli)">
                                                </div>
                                                <div class="col-6 cus-content">
                                                    <div class="row">
                                                        <div class="col">
                                                            Direccion:
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            {{ cli.direccion }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <ng-content select=".cardFooter"></ng-content>
                                </div>
                            </div>
                        </div>
                    </div>
                </perfect-scrollbar>
            </div>
        </div>
        <div class="row calendar-block" *ngIf="!hideHorarios">
            <div class="col-sm-4 owl-block">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h5>Seleccione un día</h5>
                    </div>
                    <br />
                    <owl-date-time-inline [(ngModel)]="selectedMoment" class="owlDatTime" 
                        [min]="minDateTime" pickerType="calendar" (ngModelChange)='filtrarHorarios($event)'>
                    </owl-date-time-inline>
                </div>
            </div>
            <div class="col-sm-6" style="margin-left: 5%;">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-sm-5">
                                <h5>Seleccione un horario</h5>
                            </div>
                            <div class="col-sm-7">
                                <button (click)="exitCalendario()" class="btn btn-danger-cust"
                                    style="margin-left: 5px">Cancelar</button>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="panel-body table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Hora</th>
                                    <th>Estado</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr [ngClass]="{ 'red-row-class' : h.estado != 'Disponible', 'green-row-class' : h.estado == 'Disponible' }"
                                    *ngFor="let h of horarios | paginate: paginationConfig;">
                                    <td>{{ h.horaI }} - {{h.horaF}}</td>
                                    <td>{{ h.estado }}</td>
                                    <td>
                                        <div class="pull-right">
                                            <button [hidden]="h.estado != 'Disponible'" (click)="selectHorario(h)"
                                                class="btn btn-class" style="margin-left: 5px">Seleccionar</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div style="text-align: center; margin-top: 2%">
                            <pagination-controls (pageChange)="onPageChange($event)" autoHide="true" responsive="true">
                            </pagination-controls>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="horarioScroll"></div>
    </div>
</div>
<footer class="footer-class" style="width: 100%;">
    <div class="float-right d-none d-sm-block"><b>Version</b> 1.0.0</div>
    <strong>Copyright &copy; 2020
        <a href="http://adminlte.io">Portal Clinica</a>.</strong>
    All rights reserved.
</footer>